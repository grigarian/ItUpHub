{"ast":null,"code":"var _jsxFileName = \"/Users/grigarian/ituphub-client/src/pages/ProfilePage.tsx\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect } from 'react';\nimport axios from 'axios';\nimport { useAuth } from '../context/AuthContext';\nimport toast from 'react-hot-toast';\nimport ProfileEdit from './ProfileEdit';\nimport { jsxDEV as _jsxDEV, Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nexport default function ProfilePage() {\n  _s();\n  const {\n    user,\n    login\n  } = useAuth();\n  const [profile, setProfile] = useState(null);\n  const [loading, setLoading] = useState(true);\n  const [isEditing, setIsEditing] = useState(false);\n  useEffect(() => {\n    if (!user) {\n      setLoading(false);\n      return;\n    }\n    axios.get('/user/current', {\n      withCredentials: true\n    }).then(res => {\n      setProfile({\n        bio: res.data.bio || '',\n        picture: res.data.picture || ''\n      });\n    }).catch(() => {\n      toast.error('Не удалось загрузить профиль');\n    }).finally(() => setLoading(false));\n  }, [user]);\n  const handleEditClick = () => {\n    setIsEditing(true);\n  };\n  const handleSave = updatedProfile => {\n    setProfile(updatedProfile);\n    login({\n      ...user,\n      ...updatedProfile\n    }); // обновляем пользователя в контексте\n    setIsEditing(false);\n    toast.success('Профиль обновлен');\n  };\n  if (loading) return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: \"\\u0417\\u0430\\u0433\\u0440\\u0443\\u0437\\u043A\\u0430...\"\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 48,\n    columnNumber: 23\n  }, this);\n  if (!user) return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: \"\\u041F\\u043E\\u0436\\u0430\\u043B\\u0443\\u0439\\u0441\\u0442\\u0430, \\u0432\\u043E\\u0439\\u0434\\u0438\\u0442\\u0435 \\u0447\\u0442\\u043E\\u0431\\u044B \\u043F\\u043E\\u0441\\u043C\\u043E\\u0442\\u0440\\u0435\\u0442\\u044C \\u043F\\u0440\\u043E\\u0444\\u0438\\u043B\\u044C.\"\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 50,\n    columnNumber: 21\n  }, this);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"max-w-md mx-auto p-6 bg-white rounded shadow\",\n    children: isEditing ? /*#__PURE__*/_jsxDEV(ProfileEdit, {\n      initialProfile: profile,\n      onSave: handleSave,\n      onCancel: () => setIsEditing(false)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 55,\n      columnNumber: 9\n    }, this) : /*#__PURE__*/_jsxDEV(_Fragment, {\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"mb-4\",\n        children: (profile === null || profile === void 0 ? void 0 : profile.picture) && /*#__PURE__*/_jsxDEV(\"img\", {\n          src: profile.picture,\n          alt: \"Profile\",\n          className: \"w-32 h-32 rounded-full object-cover mx-auto\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 64,\n          columnNumber: 15\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 62,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"h2\", {\n        className: \"text-xl font-semibold text-center mb-2\",\n        children: user.userName\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 71,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        className: \"text-center mb-4\",\n        children: (profile === null || profile === void 0 ? void 0 : profile.bio) || 'Биография отсутствует'\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 72,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: handleEditClick,\n        className: \"block mx-auto bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700 transition\",\n        children: \"\\u0420\\u0435\\u0434\\u0430\\u043A\\u0442\\u0438\\u0440\\u043E\\u0432\\u0430\\u0442\\u044C\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 73,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 53,\n    columnNumber: 5\n  }, this);\n}\n_s(ProfilePage, \"oXsIgyITxYzKjJV/thuckSERL20=\", false, function () {\n  return [useAuth];\n});\n_c = ProfilePage;\nvar _c;\n$RefreshReg$(_c, \"ProfilePage\");","map":{"version":3,"names":["React","useState","useEffect","axios","useAuth","toast","ProfileEdit","jsxDEV","_jsxDEV","Fragment","_Fragment","ProfilePage","_s","user","login","profile","setProfile","loading","setLoading","isEditing","setIsEditing","get","withCredentials","then","res","bio","data","picture","catch","error","finally","handleEditClick","handleSave","updatedProfile","success","children","fileName","_jsxFileName","lineNumber","columnNumber","className","initialProfile","onSave","onCancel","src","alt","userName","onClick","_c","$RefreshReg$"],"sources":["/Users/grigarian/ituphub-client/src/pages/ProfilePage.tsx"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport axios from 'axios';\nimport { useAuth } from '../context/AuthContext';\nimport toast from 'react-hot-toast';\nimport ProfileEdit from './ProfileEdit';\n\ntype UserProfile = {\n  bio: string;\n  picture: string;\n};\n\nexport default function ProfilePage() {\n  const { user, login } = useAuth();\n  const [profile, setProfile] = useState<UserProfile | null>(null);\n  const [loading, setLoading] = useState(true);\n  const [isEditing, setIsEditing] = useState(false);\n\n  useEffect(() => {\n    if (!user) {\n      setLoading(false);\n      return;\n    }\n\n    axios.get('/user/current', { withCredentials: true })\n      .then(res => {\n        setProfile({\n          bio: res.data.bio || '',\n          picture: res.data.picture || '',\n        });\n      })\n      .catch(() => {\n        toast.error('Не удалось загрузить профиль');\n      })\n      .finally(() => setLoading(false));\n  }, [user]);\n\n  const handleEditClick = () => {\n    setIsEditing(true);\n  };\n\n  const handleSave = (updatedProfile: UserProfile) => {\n    setProfile(updatedProfile);\n    login({ ...user!, ...updatedProfile }); // обновляем пользователя в контексте\n    setIsEditing(false);\n    toast.success('Профиль обновлен');\n  };\n\n  if (loading) return <div>Загрузка...</div>;\n\n  if (!user) return <div>Пожалуйста, войдите чтобы посмотреть профиль.</div>;\n\n  return (\n    <div className=\"max-w-md mx-auto p-6 bg-white rounded shadow\">\n      {isEditing ? (\n        <ProfileEdit\n          initialProfile={profile!}\n          onSave={handleSave}\n          onCancel={() => setIsEditing(false)}\n        />\n      ) : (\n        <>\n          <div className=\"mb-4\">\n            {profile?.picture && (\n              <img\n                src={profile.picture}\n                alt=\"Profile\"\n                className=\"w-32 h-32 rounded-full object-cover mx-auto\"\n              />\n            )}\n          </div>\n          <h2 className=\"text-xl font-semibold text-center mb-2\">{user.userName}</h2>\n          <p className=\"text-center mb-4\">{profile?.bio || 'Биография отсутствует'}</p>\n          <button\n            onClick={handleEditClick}\n            className=\"block mx-auto bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700 transition\"\n          >\n            Редактировать\n          </button>\n        </>\n      )}\n    </div>\n  );\n}"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}